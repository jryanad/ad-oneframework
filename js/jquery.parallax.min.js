/*
 * Plugin: jQuery Parallax
 * Version 1.1.3
 * Author: Ian Lunn
 * Twitter: @IanLunn
 * Author URL: http://www.ianlunn.co.uk/
 * Plugin URL: http://www.ianlunn.co.uk/plugins/jquery-parallax/

 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 */
!function(t){var n=t(window),e=n.height();t.fn.parallax=function(i,o,r){function s(t){var n,e,i=new Image,o=(d.css("background-size")||" ").split(" ");return/px/.test(o[0])&&(n=parseInt(o[0])),/%/.test(o[0])&&(n=d.parent().width()*(parseInt(o[0])/100)),/px/.test(o[1])&&(e=parseInt(o[1])),/%/.test(o[1])&&(e=d.parent().height()*(parseInt(o[0])/100)),"undefined"!=typeof n&&"undefined"!=typeof e?t({width:n,height:e}):(i.onload=function(){"undefined"==typeof n&&(n=this.width),"undefined"==typeof e&&(e=this.height),t({width:n,height:e})},void(i.src=(d.css("background-image")||"").replace(/url\(['"]*(.*?)['"]*\)/g,"$1")))}function h(){if(m)return d.css("backgroundPosition","");if(!isNaN(a)){var t=n.scrollTop();f=d.offset().top,f-e>t||t>f+l||d.css("backgroundPosition",i+" "+(g+a*(f-t))+"px")}}function u(){setTimeout(function(){e=n.height(),l=c(d),p=d.width(),v&&(p/l>=b/w?(k=w*(d.width()/b),m=0):m=1),0!==k?o>=0?(a=Math.min(o,k/e),g=Math.min(0,.5*(e-k-a*(e-l)))):(a=Math.max(o,-(k/e)),g=Math.min(0,.5*(-e+k+a*(-e+l)))):(a=o,g=0),h()},10)}var a,c,d=t(this),g=0,f=0,l=0,p=0,m=0,w=0,b=0,v="cover"==d.css("background-size"),k=0;0!=d.length&&((arguments.length<1||null===i)&&(i="50%"),(arguments.length<2||null===o)&&(o=.61),(arguments.length<3||null===r)&&(r=!0),c=r?function(t){return t.outerHeight(!0)}:function(t){return t.height()},s(function(t){k=w=t.height,b=t.width,u()}),n.bind({scroll:h,load:u,resize:u}),u())}}(jQuery);
